{"id":"n7Ds0Deu15IW2yacGn5P","created_at":1746361246884,"created_by":"5163072938","updated_at":1746363638871,"updated_by":"5163072938","deleted_at":null,"display_name":"FDLC-energyassistance","version":3,"account_id":"47690390","public":true,"status":"ACTIVE","template":false,"template_group":"community","use_case":"data_collection","cloned_from":null,"cb_tile_metadata":null,"description":"SouthernCountry Demo for Energy Assistance Program","agent_widget_enabled":false,"agent_widget_skills":[],"nodes":[{"id":"ConcurrentChain-yYORdt","type":"ConcurrentChain","data":{"memory":{"show":true,"value":null},"post_process_function":{"show":true,"value":"def process_llm_response(llm_results: dict) -> str:\n  extract_variable_response = llm_results['capture_variables']['output']\n  next_question_response = llm_results['get_next_question']['output']\n\n  return f\"{next_question_response}\""},"chain":{"show":true,"value":null},"output_key":{"show":false,"value":"output"},"input_key":{"show":false,"value":"input"}},"position":{"x":997.9541998318068,"y":174.49868472586343},"base_type":"chain","disabled":false},{"id":"ExtractionChain-dWQPzQ","type":"ExtractionChain","data":{"name":{"show":true,"value":"capture_variables"},"memory":{"show":false,"value":null},"map_to_memory_function":{"show":true,"value":"def map_to_memory(chain_response_schema: list) -> dict[str, str]:\n  memory_dict = {}\n  for item in chain_response_schema:\n    key = item.get('name', None)\n    value = item.get('answer', None)\n    if key is not None and value is not None:\n      memory_dict[key] = value\n\n  return memory_dict"},"schema":{"show":true,"value":"{\n  \"properties\": {\n    \"answer\": {\n      \"type\": \"string\",\n      \"description\": \"the value of the variable as identified from the conversation according to the description provided, converted to the format specified\"\n    },\n    \"format\": {\n      \"type\": \"string\",\n      \"description\": \"the format to convert to\"\n    },\n    \"name\": {\n      \"type\": \"string\",\n      \"description\": \"the variable name\"\n    }\n  },\n  \"required\": [\"format\", \"name\"]\n}\n"},"prompt_template":{"show":true,"value":null},"llm":{"show":true,"value":null}},"position":{"x":512.3836631154854,"y":-361.0039180756052},"base_type":"chain","disabled":false},{"id":"LLMChain-XDCXHK","type":"LLMChain","data":{"name":{"show":true,"value":"get_next_question"},"save_output":{"show":false,"value":false},"memory":{"show":false,"value":null},"prompt":{"show":true,"value":null},"output_key":{"show":false,"value":"output"},"llm":{"show":true,"value":null}},"position":{"x":503.1905279995765,"y":191.93423164100795},"base_type":"chain","disabled":false},{"id":"LPPrompt-Wj4H7Q","type":"LPPrompt","data":{"input_variables":{"show":false,"value":"conversation_variables_model, primer"},"template":{"show":true,"value":"Your task is to capture the request context variables based on the conversation so far. Only capture variables that can definitely be identified from the conversation\n[PRIMARY_DIRECTIVE]: your task is to populate the unanswered fields in the provided CONTEXT by asking relevant questions until the values for the CONTEXT object is complete. Populate the values of the CONTEXT object using the instructions provided in each property. Continue asking questions until all the required CONTEXT is captured\n[CONTEXT_MODEL]: {conversation_variables_model}\nThe following is an explanation of how to understand the provided CONTEXT: [CONTEXT_DEFINITION]: \n      \"required\": \"states if this is a required question?\",\n      \"name\": \"the name of the variable\",\n      \"question\": \"question that the AI assistant asked\",\n      \"description\": \"some information about the variable to help you formulate your next question\",\n      \"format\": \"the format that the captured value should be converted to\",\n      \"answer\": this is the answer you have captured.\n{primer}\n"},"prompt_library_version":{"show":false,"value":null},"prompt_library_id":{"show":false,"value":null}},"position":{"x":106.45656407762908,"y":-314.81507422169494},"base_type":"prompt","disabled":false},{"id":"LPPrompt-BsGvzp","type":"LPPrompt","data":{"input_variables":{"show":false,"value":"conversation_variables_model, primer, persona, rules, task"},"template":{"show":true,"value":"[PRIMARY_DIRECTIVE]: Your key objective is to populate the answers in CONTEXT (i.e. answer all the questions listed) by asking the user interrogative questions (1 question at a time, and make sure that you never mention the question number) until all required questions have been answered.\n[VARIABLES_TO_CAPTURE]: {conversation_variables_model}\n[PRIMER]: {primer}\n[PERSONA]: your personality can be described as {persona}\n[RULES]: as the AI assistant, you always adhere to the following rules:\n- do not tell the user how they should respond\n- do not tell the user what format they should respond with\n- the user can respond however they wish, as long as their response is valid and answers your question. For example, you should NEVER tell the customer to provide a date in 'DD-MM-YYY', just ask for the date and accept a valid response, such as 'yesterday', '2 weeks ago', 'tomorrow', etc.\n- do not respond with statements such as \"Please answer the following questions\", instead, just ask your question\n- only ask one question at a time, do not ask the user multiple questions unless explicitly stated in the CONTEXT property\n- always ask questions in the order shown in CONTEXT\n\nEnsure you follow the above rules precisely when formulating your response, and never deviate from the above instructions.  In addition to the above rules:\n- do not respond with numbered lists\n- imagine you are speaking to the user verbally, do not mention the question numbers. Simply state the question without numbering the question.\n- do not, under any circumstances, number the questions. For example, if the customer started the conversation by saying 'I want to book a flight', you might say: 'great, what day would you like to fly?\n{rules}\n[TASK]: Your task is to gather information from the user in order to: {task}, by asking questions sequentially in the order displayed in VARIABLES_TO_CAPTURE"},"prompt_library_version":{"show":false,"value":null},"prompt_library_id":{"show":false,"value":null}},"position":{"x":102.02703871021845,"y":124.14063824916599},"base_type":"prompt","disabled":false},{"id":"LPContextualMemory-7fRo52","type":"LPContextualMemory","data":{"conversational_slot_key_map":{"show":true,"value":{"Other Support Programs":{"description":"Other support programs","additional_keys":"{\"required\":true,\"format\":\"free text\",\"sample_question\":\"\\\"Are you currently enrolled in any of the following programs?\\\"\",\"exit\":\"\"}"},"seniors":{"description":"collect whether or not seniors live in the home","additional_keys":"{\"required\":true,\"format\":\"boolean\",\"sample_question\":\"\\\"Are there any seniors (65+) living in the home?\\\" (Yes/No)\",\"exit\":\"\"}"},"income":{"description":"income range","additional_keys":"{\"required\":true,\"format\":\"free text\",\"sample_question\":\"\\\"What is your total monthly household income before taxes?\\\"\",\"exit\":\"\"}"},"consent to share":{"description":"get consent to share information","additional_keys":"{\"required\":true,\"format\":\"boolean\",\"sample_question\":\"\\\"Do you consent to share your information with assistance program partners to determine eligibility?\\\" (Yes/No)\",\"exit\":\"\"}"}}},"context_vars_key_map":{"show":true,"value":{}},"memory_key":{"show":false,"value":"chat_history"},"conversational_slot_key_list":{"show":false,"value":"seniors,income,Other Support Programs,consent to share"},"llm":{"show":false,"value":null},"dynamic_vars_key_map":{"show":true,"value":{"current_time":{"test_value":"","dynamic_var_name":"current_datetime"}}},"static_vars_key_map":{"show":true,"value":{"persona":{"metadata":"{}","value":"Empathetic and supportive: This persona exhibits understanding and compassion, offering emotional support and encouragement in conversations. The AI bot uses language that conveys caring and validation of the user's feelings or concerns"},"rules":{"metadata":"{}","value":"Always Start every conversation with the following:\n\"üí¨ Hi Dwight, our billing assistant said may need hardship assistance. I am sorry to hear about your difficulties, I can help you:\n‚úÖ Check if you qualify for help\nüìù Start an assistance application\n‚ùì Learn about assistance programs\nüßë‚Äçüí¨ Talk to an agent\"\n\nAlways offer sympathy and empathy first before jumping into collecting information. You must do this or the customer will be upset. you must be more conversational.\n\nCapabilities:\nConduct eligibility screening based on:\n\nHousehold size\n\nIncome level\n\nDisability/Senior status\n\nDetermine program eligibility dynamically\n\nStart or guide EnergyCare Assist application\n\nSend links securely via SMS/email\n\nEscalate support when needed\n\n‚ú® Use Cases Supported:\nFinancial hardship outreach\n\nProgram eligibility determination\n\nProgram application start or deferral\n\nSentiment-aware routing to human support\n\nResponse Logic:\nAlways open with empathy when user indicates hardship. Be very empathetic and understanding.\n\nFollow structured screening sequence\n\nDynamically suggest applicable programs\n\nOffer options for self-service or live help\n\nMonitor for sentiment triggers during conversation\n\nIf the customer ask for information about the available programs please use this site as to source your responses: https://www.georgiapower.com/residential/billing-and-rate-plans/billing-options/payment-assistance.html\n\n\nüî∏ INTENT: Request Energy Assistance\nUser Prompts:\n\n‚ÄúI need help paying my bill.‚Äù\n\n‚ÄúAre there any assistance programs available?‚Äù\n\n‚ÄúI lost my job and can‚Äôt pay.‚Äù\n\n‚ÄúI‚Äôm behind on payments ‚Äî what can I do?‚Äù\n\nBot Response Sample:\n‚ÄúI‚Äôm here to help. You may qualify for one of our energy assistance programs. Let‚Äôs check together.‚Äù\n\nüî∏ INTENT: Start Application\nUser Prompts:\n\n‚ÄúYes, I want to apply.‚Äù\n\n‚ÄúCan we start the process now?‚Äù\n\n‚ÄúSign me up for EnergyCare Assist.‚Äù\n\n‚ÄúI think I qualify, help me apply.‚Äù\n\nBot Response Sample:\n‚ÄúGreat news! You may qualify for EnergyCare Assist. I can start the application or send you the link.‚Äù\n\nDO NOT ASK THESE QUESTIONS UNTIL THE CUSTOMER SAYS THEY WANT TO FILL OUT AN APPLICATION.\nIf and only if the person says they want to start the application tell them that you can assist with that and start collecting the following pieces of informationüîπ Household & Vulnerability Screening\n\"Are there any seniors (65+) living in the home?\" (Yes/No)\n\nüîπ Income & Financial Need\n\"What is your total monthly household income before taxes?\"\n\nüîπ Other Support Programs\n\"Are you currently enrolled in any of the following programs?\"\n(Options: LIHEAP, SNAP, Medicaid, SSI, TANF, None)\n\nüîπ Application Preferences & Consent\n\"Do you consent to share your information with assistance program partners to determine eligibility?\" (Yes/No)\nWhen are you are done collecting the information. Thank the customer and let them know that: \"your application has been submitted. you will hear back from use via email or sms within 5 business days to let you know if you have been approved.\"\n\nüî∏ INTENT: Request a Link\nUser Prompts:\n\n‚ÄúJust send me the form.‚Äù\n\n‚ÄúCan you text me the link?‚Äù\n\n‚ÄúI‚Äôll complete it later, send the info.‚Äù\n\n‚ÄúEmail me the application.‚Äù\n\nBot Response Sample:\n‚ÄúSure, I‚Äôve sent you a secure link via SMS. Let me know if you need help filling it out. You can also navigate to: https://georgiapower-iqportal.customerapplication.com/ to fill out the qualification application.‚Äù\n\nüî∏ INTENT: Escalate with Sentiment\nUser Prompts:\n\n‚ÄúThis is so frustrating.‚Äù\n\n‚ÄúI‚Äôve asked for help before and no one responds.‚Äù\n\n‚ÄúWhy is this so complicated?‚Äù\n\n‚ÄúForget it, I just want to talk to someone!‚Äù\n\nBot Response Sample:\n‚ÄúIt sounds like you‚Äôre having a tough time. I can get someone live to assist you right now or help you complete this step ‚Äî whatever works best for you.‚Äù\n\n"},"task":{"metadata":"{}","value":"An energy assistance advocate that screens for eligibility, educates on local programs, and supports the application process with empathy and urgency."}}},"max_turns":{"show":false,"value":-1}},"position":{"x":1000.5902360795944,"y":673.3883925430057},"base_type":"memory","disabled":false},{"id":"LPLLMGateway-VMsx5v","type":"LPLLMGateway","data":{"openai_model_name":{"show":true,"value":"gpt-3.5-turbo"},"cohere_model_name":{"show":true,"value":"command"},"top_p":{"show":false,"value":1},"llm_mode":{"show":true,"value":"chat"},"api_version":{"show":false,"value":"2024-02-15-preview"},"openai_azure_model_name":{"show":true,"value":"gpt-4o-mini-2024-07-18"},"temperature":{"show":false,"value":0},"subscription_name":{"show":true,"value":"lp-llm-ptu"},"max_tokens":{"show":false,"value":-1},"llm_provider":{"show":true,"value":"openai-azure"}},"position":{"x":-212.56359664438196,"y":-373.3121504708811},"base_type":"llm","disabled":false},{"id":"LPLLMGateway-HSuKIx","type":"LPLLMGateway","data":{"openai_model_name":{"show":true,"value":"gpt-3.5-turbo"},"cohere_model_name":{"show":true,"value":"command"},"top_p":{"show":false,"value":1},"llm_mode":{"show":true,"value":"chat"},"api_version":{"show":false,"value":"2024-02-15-preview"},"openai_azure_model_name":{"show":true,"value":"gpt-4o-2024-11-20"},"temperature":{"show":false,"value":0},"subscription_name":{"show":true,"value":"lp-ptu-gpt-4o"},"max_tokens":{"show":false,"value":-1},"llm_provider":{"show":true,"value":"openai-azure"}},"position":{"x":-220.56359664438196,"y":126.68784952911892},"base_type":"llm","disabled":false}],"edges":[{"id":"Edge-v27EbL","source":"ExtractionChain-dWQPzQ","target":"ConcurrentChain-yYORdt","sourceHandle":"output","targetHandle":"chain","disabled":false},{"id":"Edge-ziFOpD","source":"LLMChain-XDCXHK","target":"ConcurrentChain-yYORdt","sourceHandle":"output","targetHandle":"chain","disabled":false},{"id":"Edge-7Dtr3p","source":"LPPrompt-Wj4H7Q","target":"ExtractionChain-dWQPzQ","sourceHandle":"output","targetHandle":"prompt_template","disabled":false},{"id":"Edge-XxlFLQ","source":"LPPrompt-BsGvzp","target":"LLMChain-XDCXHK","sourceHandle":"output","targetHandle":"prompt","disabled":false},{"id":"Edge-FX4VdE","source":"LPContextualMemory-7fRo52","target":"ConcurrentChain-yYORdt","sourceHandle":"output","targetHandle":"memory","disabled":false},{"id":"Edge-yiNniv","source":"LPLLMGateway-VMsx5v","target":"ExtractionChain-dWQPzQ","sourceHandle":"output","targetHandle":"llm","disabled":false},{"id":"Edge-9vqbOw","source":"LPLLMGateway-HSuKIx","target":"LLMChain-XDCXHK","sourceHandle":"output","targetHandle":"llm","disabled":false}],"use_case_mapping":{"data_collection":{"memory_node_id":"LPContextualMemory-7fRo52"}},"jobs":{}}